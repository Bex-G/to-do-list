(()=>{"use strict";class e{constructor(e,t){this.id=e,this._name=t}get name(){return this._name}set name(e){this._name=e}}class t{constructor(e,t,n,d,l,a){this.id=e,this.quest=t,this._name=n,this.priority=d,this.date=l,this.notes=a}get name(){return this._name}set name(e){this._name=e}}class n{constructor(e,t,n,d){this.id=e,this.tab=t,this.content=n,this.checked=d}}function d(){rmQuestBtn.textContent=" - Quests";let e=document.querySelectorAll(".x-action");for(d=0;d<e.length;d++)e[d].classList.remove("show");let t=document.querySelectorAll(".plus");for(d=0;d<t.length;d++)t[d].style.display="flex";let n=document.querySelectorAll(".remove-tab");var d;for(d=0;d<n.length;d++)n[d].style.display="flex";rmQuestBtn.style.backgroundColor="transparent",rmQuestBtn.style.color="black"}function l(e,t){return e.dataset.date<t.dataset.date?-1:e.dataset.date>t.dataset.date?1:0}function a(e){var t=".q-"+e.id,n=document.querySelectorAll(t,"[data-date]");Array.from(n).sort(l).forEach((t=>document.querySelector("#q"+e.id).appendChild(t)))}function i(e){let t=document.getElementsByClassName("tab-content");for(d=0;d<t.length;d++)t[d].style.display="none";document.getElementById("t"+e.id).style.display="block";let n=document.querySelectorAll(".tab");var d;for(d=0;d<n.length;d++)n[d].classList.remove("active");document.getElementById(e.id).classList.add("active");let l="addInput-"+e.id;document.getElementById(l).value=null}const o=document.getElementById("sidebar"),c=document.getElementById("tabContainer");document.getElementById("rmQuestBtn").textContent=" - Quests";let s=0,r=0,m=0;function u(e,t){return e.id<t.id?-1:e.id>t.id?1:0}function h(e){let t=document.createElement("div");t.id="d"+e.id,t.classList="dropdown";let n=document.createElement("div");n.id="dHead"+e.id,n.classList="drop-header";let d=document.createElement("div");d.id="q"+e.id,d.classList.add("drop-content","show"),t.appendChild(n),t.appendChild(d),o.appendChild(t)}function g(e){let t=document.createElement("p");t.id="a"+e.id,t.classList="arrow",t.addEventListener("click",(()=>{let n=document.getElementById("q"+e.id);n.children.length>0&&(n.classList.toggle("show"),t.classList.toggle("down"))})),document.getElementById("dHead"+e.id).appendChild(t)}function p(e){let t=document.createElement("h3");t.textContent=e.name,t.contentEditable="true",t.addEventListener("keydown",(e=>{let n=t.textContent.length;n>=12&&"Backspace"!==e.key?(alert("Character limit exceeded!"),t.blur()):1===n&&"Backspace"===e.key&&(alert("This must be at least 1 character long."),t.blur()),"Enter"===e.key&&t.blur()})),t.addEventListener("focusout",(n=>{t.textContent.length<1&&(t.textContent="untitled"),e.name=t.textContent,localStorage.setItem("q"+e.id,JSON.stringify(e))})),document.getElementById("dHead"+e.id).appendChild(t)}function y(e){let n=document.createElement("div");n.id="action"+e.id;let d=document.createElement("p");d.classList="plus",d.textContent="+",d.addEventListener("click",(()=>{let n=prompt("What do you want to name your new list?"),d=document.getElementById("q"+e.id),l=document.getElementById("a"+e.id);null!=n&&""!=n&&(n.length<=26?(function(e,n){r++;let d=new t(r,e.id,n);localStorage.setItem("t"+d.id,JSON.stringify(d)),v(e,d),f(e,d),C(d),I(d),i(d)}(e,n),d.classList.add("show"),l.classList.add("down")):alert("Oops! Please choose a name that is fewer than 26 characters long. :)"))})),n.appendChild(d),document.getElementById("dHead"+e.id).appendChild(n)}function E(e){let t=document.createElement("p");t.classList="x-action",t.textContent="X",t.addEventListener("click",(()=>{!0===confirm("Are you sure you want to delete this quest and all its content? (This can not be undone.)")&&(function(e){for(var t=[],n=document.getElementById("q"+e.id).children,d=0,l=n.length;d<l;d++)t.push(n[d].classList);for(d=0,l=t.length;d<l;d++)t[d].contains("active")&&(tabContainer.innerHTML="")}(e),function(e){for(var t=[],n=document.getElementById("q"+e.id).children,d=0,l=n.length;d<l;d++)t.push(n[d].id);for(d=0,l=t.length;d<l;d++)localStorage.removeItem("t"+t[d]);localStorage.removeItem("q"+e.id),document.getElementById("d"+e.id).remove()}(e)),2===o.children.length&&d()}));let n=document.getElementById("d"+e.id);t.addEventListener("mouseover",(()=>{let t=document.getElementById("q"+e.id),d=document.getElementById("a"+e.id);n.classList.toggle("warning"),t.children.length>0&&(t.classList.add("show"),d.classList.add("down"))})),t.addEventListener("mouseout",(()=>{n.classList.toggle("warning")})),document.getElementById("action"+e.id).appendChild(t)}function v(e,t){let n=document.getElementById("q"+e.id),d=document.createElement("div");d.id=t.id,d.classList.add("q-"+e.id,"tab"),d.setAttribute("data-date",null);let l=document.createElement("p");l.id="tb"+t.id,l.classList="tab-btn",d.appendChild(l),n.appendChild(d)}function f(e,t){let n=document.createElement("div");n.id="t"+t.id,n.classList="tab-content";let d=document.createElement("div");d.classList="tab-header";let l=document.createElement("div");l.classList="tab-info",function(e,t){let n=document.getElementById("tb"+t.id);t.name.length>=12?n.textContent=t.name.substring(0,12)+"...":n.textContent=t.name;let d=document.createElement("h2");d.id="name"+t.id,d.textContent=t.name,d.contentEditable="true",d.addEventListener("keydown",(e=>{"Enter"===e.key&&d.blur()}));d.addEventListener("keydown",(e=>{d.textContent.length>=26&&"Backspace"!==e.key&&(alert("Character limit exceeded!"),d.blur())})),d.addEventListener("focusout",(()=>{d.textContent.length>=12?n.textContent=d.textContent.substring(0,12)+"...":d.textContent.length<1?(d.textContent="untitled",n.textContent="untitled"):n.textContent=d.textContent,t.name=d.textContent,localStorage.setItem("t"+t.id,JSON.stringify(t))})),n.addEventListener("click",(()=>{i(t)})),e.appendChild(d)}(d,t),function(e,t){let n=document.createElement("p");n.classList="remove-tab";let d=document.createTextNode("×");n.appendChild(d),n.addEventListener("click",(()=>{let n=document.getElementById("t"+t.id);!0===confirm("Are you sure you want to delete this list? (This can not be undone.)")&&(function(e){for(var t=[],n=0,d=document.getElementById("list"+e.id).children.length;n<d;n++)localStorage.removeItem("l"+t[n]);for(n=0,d=t.length;n<d;n++)localStorage.removeItem("l"+t[n]);localStorage.removeItem("l"+e.id),document.getElementById("list"+e.id).remove()}(t),document.getElementById(t.id).remove(),n.remove(),localStorage.removeItem("t"+t.id));let d=document.getElementById("q"+e.id),l=document.getElementById("a"+e.id);d.children.length<1&&l.classList.remove("down")})),document.getElementById(t.id).appendChild(n)}(e,t),l.appendChild(d),function(e,t){let n=document.createElement("div");n.id="priority";let d=document.createElement("label");d.htmlFor="priorityInput"+t.id,d.textContent="main quest?",n.appendChild(d);let l=document.createElement("input");l.type="checkbox",l.id="priorityInput"+t.id,l.addEventListener("change",(()=>{document.getElementById(t.id).classList.toggle("important");var e=l.checked;t.priority=!0===e?"true":"false",localStorage.setItem("t"+t.id,JSON.stringify(t))})),n.appendChild(l),e.appendChild(n)}(l,t),function(e,t,n){let d=document.createElement("div");d.id="date";let l=document.createElement("label");l.htmlFor="dateInput"+n.id,l.textContent="due by: ",d.appendChild(l);let i=document.createElement("input");i.type="date",i.id="dateInput"+n.id,i.addEventListener("change",(()=>{document.getElementById(n.id).setAttribute("data-date",i.value),a(t),n.date=i.value,localStorage.setItem("t"+n.id,JSON.stringify(n))})),d.appendChild(i),e.appendChild(d)}(l,e,t),function(e,t){let n=document.createElement("div");n.id="notebook";let d=document.createElement("label");d.id="notebookLabel",d.htmlFor="notes"+t.id,d.textContent="notes:";let l=document.createElement("textarea");l.id="notes"+t.id,l.addEventListener("keydown",(e=>{"Enter"===e.key&&l.blur()})),l.addEventListener("change",(()=>{t.notes=l.value,localStorage.setItem("t"+t.id,JSON.stringify(t))})),n.appendChild(d),n.appendChild(l),e.appendChild(n)}(l,t),n.appendChild(l),c.appendChild(n)}function C(e){let t=document.getElementById("t"+e.id),d=document.createElement("div");d.id="add";var l=document.createElement("input");l.type="text",l.id="addInput-"+e.id,l.classList="add-input",l.addEventListener("keydown",(t=>{if("Enter"===t.key&&""!=l.value){m++;let t=new n(m,e.id,l.value);localStorage.setItem("l"+t.id,JSON.stringify(t)),L(e,t),l.value=""}})),d.appendChild(l);let a=document.createElement("button");a.type="submit",a.textContent="add",a.id="addBtn-"+e.id,a.classList="add-btn",a.addEventListener("click",(()=>{if(""!=l.value){m++;let t=new n(m,e.id,l.value);localStorage.setItem("l"+t.id,JSON.stringify(t)),L(e,t),l.value=""}})),d.appendChild(a),t.appendChild(d)}function I(e){let t=document.getElementById("t"+e.id),n=document.createElement("div");n.id="list"+e.id,n.classList="ul",t.appendChild(n),c.appendChild(t)}function L(e,t){let n=document.createElement("li");n.id="l"+t.id;let d=document.createElement("label");d.htmlFor="li"+t.id;let l=document.createElement("span");l.textContent=t.content;let a=document.createElement("input");a.type="checkbox",a.id="li"+t.id,a.addEventListener("change",(()=>{var e=a.checked;t.checked=!0===e?"true":"false",localStorage.setItem("l"+t.id,JSON.stringify(t))})),d.appendChild(a),d.appendChild(l),n.appendChild(d),document.getElementById("list"+e.id).appendChild(n),function(e,t){let n=document.createElement("span");n.classList="close";let d=document.createTextNode("×");n.appendChild(d),n.addEventListener("mouseover",(()=>{t.classList.toggle("hover")})),n.addEventListener("mouseout",(()=>{t.classList.toggle("hover")})),n.addEventListener("click",(()=>{t.remove(),localStorage.removeItem("l"+e.id)})),t.appendChild(n)}(t,n)}window.addEventListener("load",(()=>{window.localStorage.length>0&&function(){var d,l=[];for(d=0;d<window.localStorage.length;d++){let e=window.localStorage.key(d);"q"===e.slice(0,1)&&l.push(JSON.parse(window.localStorage.getItem(e)))}let i=l.sort(u),o=i[i.length-1];i.forEach((d=>{let l=new e(d.id,d._name);h(l),g(l),p(l),y(l),E(l),function(e){var d,l=[];for(d=0;d<window.localStorage.length;d++){let e=window.localStorage.key(d);"t"===e.slice(0,1)&&l.push(JSON.parse(window.localStorage.getItem(e)))}let i=l.sort(u),o=i[i.length-1];i.forEach((d=>{if(e.id===d.quest){let l=new t(d.id,d.quest,d._name,d.priority,d.date,d.notes);v(e,l),f(e,l),C(l),I(l),r=o.id,function(e,t){"true"===t.priority&&(document.getElementById(t.id).classList.toggle("important"),document.getElementById("priorityInput"+t.id).checked=!0),null!=t.date&&(document.getElementById(t.id).setAttribute("data-date",t.date),a(e),document.getElementById("dateInput"+t.id).value=t.date),null!=t.notes&&(document.getElementById("notes"+t.id).value=t.notes)}(e,l),document.getElementById("a"+e.id).classList.add("down"),function(e){var t,d=[];for(t=0;t<window.localStorage.length;t++){let e=window.localStorage.key(t);"l"===e.slice(0,1)&&d.push(JSON.parse(window.localStorage.getItem(e)))}let l=d.sort(u),a=l[l.length-1];l.forEach((t=>{if(e.id===t.tab){let d=new n(t.id,t.tab,t.content);L(e,d),m=a.id,"true"===t.checked&&(document.getElementById("li"+d.id).checked=!0)}}))}(l)}}))}(l),s=o.id}))}()}));let B=document.getElementsByTagName("li");for(b=0;b<B.length;b++){let e=document.createElement("span"),t=document.createTextNode("×");e.classList="close",e.appendChild(t),B[b].appendChild(e)}let w=document.getElementsByClassName("close");var b;for(b=0;b<w.length;b++)w[b].onclick=function(){this.parentElement.style.display="none"};document.getElementById("addQuestBtn").addEventListener("click",(()=>{!function(){d();let t=prompt("What is your quest?");if(null!=t&&""!=t)if(t.length<=12){s++;let n=new e(s,t);h(n),g(n),p(n),y(n),E(n),localStorage.setItem("q"+n.id,JSON.stringify(n))}else alert("Oops! Please choose a name that is fewer than 12 characters long. :)")}()})),document.getElementById("rmQuestBtn").addEventListener("click",(()=>{sidebar.children.length>2&&(" - Quests"===rmQuestBtn.textContent?function(){let e=document.querySelectorAll(".x-action");for(d=0;d<e.length;d++)e[d].classList.add("show");let t=document.querySelectorAll(".plus");for(d=0;d<t.length;d++)t[d].style.display="none";let n=document.querySelectorAll(".remove-tab");var d;for(d=0;d<n.length;d++)n[d].style.display="none";rmQuestBtn.style.backgroundColor="red",rmQuestBtn.style.color="white",rmQuestBtn.textContent="Finish"}():d())}))})();